<div class="item-page">
  <div class="item-header section">
    <div class="item-header-img">
      <div class="header-img"></div>
      <p>Upload Image</p>
    </div>

    <div class="item-info">
      <h1><%= @item.name %></h1>
      <p>SKU: <span class="item-info-value"><%= @item.barcode %></span></p>
      <p>Barcode: <span class="item-info-value"><%= @item.secondary_barcode %></span></p>
      <p>Location: <span class="item-info-value"><%= @item.location %></span></p>
      <p>Brand: <span class="item-info-value"><%= @item.brand %></span></p>
      <p>Description: <span class="item-info-value"><%= @item.category %></span></p>
      <p>Retail: $<span class="item-info-value"><%= @item.retail %></span></p>
      <p>Tags:</p>
      <%# <p>In Stock: <%= @total_amount </p> %>
    </div>

    <div class="item-links">
      <p><%= link_to "Edit", edit_item_path %></p>
      <p><%= link_to "Delete",
            item_path(@item),
            method: :delete,
            id: "item-delete",
            data: { confirm: "Are you sure?" }
      %></p>
    </div>
  </div>


  <div class="item-stock section">
    <div class="item-stock-info">
      <h1>Stock</h1>
      <div class="stock-info">
        <div class="stock-info-column-headers">
          <h3>Upcoming</h3>
          <h3>Date</h3>
          <h3>Remaining</h3>
        </div>

        <% if @item.item_amounts.empty? %>
          <p>No items in stock!</p>
        <% else %>
          <% @item.item_amounts.each do |item_amount| %>
            <div class="stock-info-amounts">
              <p><%= item_amount.amount %></p>
              <p><%= item_amount.exp_date %></p>
              <p><%= (item_amount.exp_date - Time.now.to_date).to_i %> days</p>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="item-stock-graph">
      <p><%= link_to "Add quantity", new_item_item_amount_path(@item) %></p>
      <div class="stock-graph">
      </div>
    </div>
  </div>


  <div class="item-logs"></div>
  <div class="item-insights"></div>
</div>

<%# <h3>Amounts</h3>
<% if @item.item_amounts.empty? %>
  <%# <p>You have 0 items in stock</p> %>
<%# <% else %>
  <%# <ol>
    <% @item.item_amounts.each do |item_amount| %>
      <%# <li> %>
        <%# <p>Quantity: <%= item_amount.amount %>
        <%# <p>Expiry date: <%= item_amount.exp_date</p> %> 
        <%# <p>Purchased by:</p> %>
        <%# <p>Date: <%= item_amount.created_at %>
        <%# <p><%= link_to "Delete amount",
            item_amount_path(item_amount),
            method: :delete,
            data: { confirm: "Are you sure?" } 
        
      </li>
    <% end %>
  <%# </ol> %>
<%# <% end %>

<%# <h3>Actions:</h3> %>
<%# <p><%= link_to "Add amount", new_item_item_amount_path(@item)</p> %>
<%# <p><%= link_to "Edit item info", edit_item_path</p> %>
<%# <p><%= link_to "Delete item", %>
            <%# item_path(@item), %>
            <%# method: :delete, %>
            <%# data: { confirm: "Are you sure?" }  %>
<%#</p> %>


<%# # TODO: implement sub-inventories depending on item's needs (i.e. orders & LBs)
# TO DO: have the total amount of an item display with graphic represaentation (to be able to check amounts in-stock for orders, in-stock for LB, amount ordered, amount ordered & in-transit, etc..) %>